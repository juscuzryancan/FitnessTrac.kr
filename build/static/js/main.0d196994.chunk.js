(this.webpackJsonpfitnesstrackr=this.webpackJsonpfitnesstrackr||[]).push([[0],{46:function(e,t,n){},47:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),i=n(6),a=n(4),s=n(1),o=n(22),u=n.n(o),j=n(10),l=n(3),b=n(5),d=n.n(b),h=(n(46),n(47),n(0)),O=function(){return Object(h.jsxs)("svg",{className:"hamburger-icon",viewBox:"0 0 100 80",width:"40",height:"40",children:[Object(h.jsx)("rect",{className:"rect",width:"100",height:"20"}),Object(h.jsx)("rect",{className:"rect",y:"30",width:"100",height:"20"}),Object(h.jsx)("rect",{className:"rect",y:"60",width:"100",height:"20"})]})},v=function(e){var t=e.token,n=e.user,c=e.setToken,r=Object(s.useState)(!1),i=Object(a.a)(r,2),o=i[0],u=i[1],j=Object(l.g)();return Object(h.jsxs)("nav",{className:"nav-bar",children:[Object(h.jsx)("div",{className:"nav-title",onClick:function(){j("/")},children:"FitnessTrac.kr"}),t&&Object(h.jsxs)("h3",{children:[" Welcome, ",null===n||void 0===n?void 0:n.username]}),Object(h.jsx)("button",{className:"header-button",onClick:function(){j("/routines")},children:"Routines"}),Object(h.jsx)("button",{className:"header-button",onClick:function(){j("/activities")},children:"Activities"}),t&&Object(h.jsx)("button",{className:"header-button",onClick:function(){j("/profile")},children:"My Account"}),t?Object(h.jsx)("button",{onClick:function(){c(""),localStorage.removeItem("token")},children:"Logout"}):Object(h.jsx)("button",{className:"header-button",onClick:function(){j("/authentication/login")},children:"Login/Register"}),Object(h.jsx)("div",{className:"hamburger-icon",onClick:function(){u(!o)},children:Object(h.jsx)(O,{})})]})},x=function(e){var t=e.routine,n=e.children,c=(Object(l.g)(),t.activities),r=(t.creatorId,t.creatorName),i=t.goal,a=(t.isPublic,t.name);t.id;return Object(h.jsxs)("div",{className:"routine",children:[Object(h.jsxs)("div",{className:"routine-header",children:[Object(h.jsxs)("h3",{children:["Routine Name: ",a]}),Object(h.jsxs)("h4",{children:["Creator: ",r]}),Object(h.jsxs)("h4",{children:["Goal: ",i]})]}),Object(h.jsxs)("div",{className:"routine-activities",children:[c.map((function(e,t){return Object(h.jsx)(m,{activity:e},t)})),n]})]})},f=(n(49),function(e){var t=e.token,n=e.activities,c=e.setActivities;return Object(h.jsxs)("div",{className:"activities",children:[t&&Object(h.jsx)(S,{activities:n,setActivities:c,token:t}),Object(h.jsx)("h2",{children:"Activities"}),n.length>0&&n.map((function(e){return Object(h.jsx)(m,{token:t,activity:e},e.id)}))]})}),p=(n(50),function(e){var t=e.token,n=(e.activities,e.routines);e.setRoutines,Object(l.g)();return Object(h.jsxs)("div",{className:"routines",children:[Object(h.jsx)("h2",{children:"Routines"}),t&&Object(h.jsxs)("h4",{children:["Create/Edit your own routine in ",Object(h.jsx)(j.b,{className:"routines-link",to:"/profile",children:"My Account"})]}),(null===n||void 0===n?void 0:n.length)>0&&n.map((function(e){return Object(h.jsx)(x,{routine:e},e.id)}))]})}),m=(n(51),function(e){var t=e.activity,n=e.token,c=Object(l.g)(),r=t.id,i=t.name,a=t.description,s=t.duration,o=t.count;return Object(h.jsxs)("div",{className:"activity",children:[Object(h.jsxs)("h3",{children:["Activity: ",i]}),Object(h.jsxs)("div",{children:["Description: ",a]}),s&&Object(h.jsxs)("div",{children:["Duration: ",s]}),o&&Object(h.jsxs)("div",{children:["Count: ",o]}),n&&Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("button",{onClick:function(){return c("/activity/".concat(r))},children:"Edit Activity"})})]},r)}),g=n(7),k=(n(52),function(e){var t=e.setToken,n=(e.handleUser,Object(l.g)()),c=Object(l.i)().method,o="login"===c?"Log In":"Register",u={username:"",password:"",confirmPassword:""},j=Object(s.useState)(u),b=Object(a.a)(j,2),O=b[0],v=b[1],x=Object(s.useState)(""),f=Object(a.a)(x,2),p=f[0],m=f[1],k=function(){var e=Object(i.a)(r.a.mark((function e(i){var a,s,o,j;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.preventDefault(),"register"!==c||O.password===O.confirmPassword){e.next=4;break}return m("Passwords do not match"),e.abrupt("return");case 4:return e.prev=4,e.next=7,d.a.post("/api/users/".concat(c),O);case 7:if(a=e.sent,!1!==(s=a.data).success){e.next=11;break}throw s;case 11:v(u),m(""),"login"===c?(t(s.token),localStorage.setItem("token",s.token),n("/")):(m("Successful login, Please login"),n("/authentication/login")),e.next=22;break;case 16:e.prev=16,e.t0=e.catch(4),o=e.t0.name,j=e.t0.message,console.error("Name: ".concat(o," Message: ").concat(j)),m(j);case 22:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"authentication-container",children:Object(h.jsxs)("form",{onSubmit:k,className:"authentication-form",children:[Object(h.jsx)("h2",{children:o}),p&&Object(h.jsx)("h3",{children:p}),Object(h.jsx)("label",{htmlFor:"authentication-username",children:"Username"}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{required:!0,id:"authentication-username",value:O.username,onChange:function(e){return v(Object(g.a)(Object(g.a)({},O),{},{username:e.target.value}))}}),Object(h.jsx)("br",{}),Object(h.jsx)("label",{htmlFor:"authentication-password",children:"Password"}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{required:!0,type:"password",id:"authentication-password",value:O.password,onChange:function(e){return v(Object(g.a)(Object(g.a)({},O),{},{password:e.target.value}))}}),"register"===c&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("label",{htmlFor:"authentication-confirmation",children:"Confirm Your Password"}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{required:!0,type:"password",id:"authentication-confirmation",value:O.confirmPassword,onChange:function(e){return v(Object(g.a)(Object(g.a)({},O),{},{confirmPassword:e.target.value}))}})]}),Object(h.jsx)("button",{className:"login-button",type:"submit",children:"Login"}),"login"===c&&Object(h.jsx)("button",{onClick:function(){return n("/authentication/register")},children:"Not a user? Register here"}),"register"===c&&Object(h.jsx)("button",{onClick:function(){return n("/authentication/login")},children:"Already a user? Log In here"})]})})}),y=function(e){var t=e.routine,n=e.setRoutine,c=e.handleSubmit;e.activities;return Object(h.jsxs)("form",{className:"routine-form",onSubmit:c,children:[Object(h.jsx)("input",{required:!0,value:t.name,placeholder:"Routine Name",onChange:function(e){n(Object(g.a)(Object(g.a)({},t),{},{name:e.target.value}))}}),Object(h.jsx)("input",{required:!0,value:t.goal,placeholder:"Routine Goal",onChange:function(e){n(Object(g.a)(Object(g.a)({},t),{},{goal:e.target.value}))}}),Object(h.jsx)("label",{children:"Public:"}),Object(h.jsx)("input",{value:t.isPublic,type:"checkbox",onChange:function(e){n(Object(g.a)(Object(g.a)({},t),{},{isPublic:e.target.checked}))}}),Object(h.jsx)("button",{type:"submit",children:"Submit"})]})},w=(n(53),function(e){var t=e.activity,n=e.setActivity,c=e.handleSubmit;return Object(h.jsxs)("form",{className:"activity-form",onSubmit:c,children:[Object(h.jsx)("input",{required:!0,value:t.name,placeholder:"Activity Name",onChange:function(e){n(Object(g.a)(Object(g.a)({},t),{},{name:e.target.value}))}}),Object(h.jsx)("input",{required:!0,value:t.description,placeholder:"Activity Description",onChange:function(e){n(Object(g.a)(Object(g.a)({},t),{},{description:e.target.value}))}}),Object(h.jsx)("button",{type:"submit",children:"Submit"})]})}),R=(n(54),function(e){var t=e.userRoutines,n=e.setUserRoutines,c=(e.user,e.token),a=e.routines,s=e.setRoutines,o=e.handleRoutines,u=Object(l.g)(),j=function(){var e=Object(i.a)(r.a.mark((function e(i){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.delete("/api/routines/".concat(i),{headers:{Authorization:"Bearer ".concat(c)}});case 3:if(a=e.sent,!1!==a.data.success){e.next=7;break}throw error;case 7:n(t.filter((function(e){return e.id!==i}))),o(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("error");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return 0===t.length?Object(h.jsxs)(h.Fragment,{children:[c&&Object(h.jsx)(A,{handleRoutines:o,setRoutines:s,routines:a,token:c}),Object(h.jsx)("div",{children:"No Routines Found"})]}):Object(h.jsxs)("div",{className:"profile",children:[Object(h.jsx)("h1",{children:"My account"}),Object(h.jsxs)("div",{children:[c&&Object(h.jsx)(A,{handleRoutines:o,setRoutines:s,routines:a,token:c}),Object(h.jsx)("h2",{children:"My Routines"}),t.map((function(e){return Object(h.jsxs)(x,{routine:e,children:[Object(h.jsx)("button",{onClick:function(){return u("/routines/".concat(e.id))},children:"Edit"}),Object(h.jsx)("button",{onClick:function(){return j(e.id)},children:"Delete"})]},e.id)}))]})]})}),N=n(23),S=(n(55),function(e){var t=e.token,n=e.activities,c=e.setActivities,o={name:"",description:""},u=Object(s.useState)(""),j=Object(a.a)(u,2),l=j[0],b=j[1],O=Object(s.useState)(o),v=Object(a.a)(O,2),x=v[0],f=v[1],p=function(){var e=Object(i.a)(r.a.mark((function e(i){var a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.preventDefault(),e.prev=1,e.next=4,d.a.post("/api/activities",x,{headers:{Authorization:"Bearer ".concat(t)}});case 4:if(a=e.sent,!1!==(s=a.data).success){e.next=9;break}return b(s.message),e.abrupt("return");case 9:c([].concat(Object(N.a)(n),[s])),f(o),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h2",{className:"add-activity-header",children:"Add Activity"}),l&&Object(h.jsx)("div",{children:l}),Object(h.jsx)(w,{activity:x,setActivity:f,handleSubmit:p})]})}),A=function(e){var t=e.token,n=e.routines,c=(e.setRoutines,e.activities),o=e.handleRoutines,u={name:"",goal:"",isPublic:!1},j=Object(s.useState)(""),l=Object(a.a)(j,2),b=l[0],O=l[1],v=Object(s.useState)(u),x=Object(a.a)(v,2),f=x[0],p=x[1],m=function(){var e=Object(i.a)(r.a.mark((function e(c){var i,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.prev=1,e.next=4,d.a.post("/api/routines",f,{headers:{Authorization:"Bearer ".concat(t)}});case 4:if(i=e.sent,console.log(i),!1!==(a=i.data).success){e.next=10;break}return O(a.message),e.abrupt("return");case 10:return e.next=12,o();case 12:console.log(n),p(u),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h2",{children:"Add Routine"}),b&&Object(h.jsx)("div",{children:b}),Object(h.jsx)(y,{routine:f,setRoutine:p,handleSubmit:m,activities:c})]})},C=(n(56),function(e){var t=e.routines,n=e.activities,c=e.userRoutines,o=e.token,u=e.handleRoutines,j=Object(l.g)(),b=Object(s.useState)(null),O=Object(a.a)(b,2),v=O[0],x=O[1],f=Object(s.useState)(null),p=Object(a.a)(f,2),m=p[0],k=p[1],y={activityId:-1,count:0,duration:0},w=Object(l.i)().routineId;if(Object(s.useEffect)((function(){!function(){for(var e,n=0;n<t.length;n++)t[n].id===1*w&&(e=t[n]);if(e)x(e);else{for(var r=0;r<c.length;r++)c[r].id===1*w&&(e=c[r]);x(e)}}(),k(y)}),[t,c]),!v)return Object(h.jsx)("h2",{children:"Routine Not Found"});var R=function(){var e=Object(i.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d.a.post("/api/routines/".concat(v.id,"/activities"),m,{header:{Authorization:"Bearer ".concat(o)}});case 4:return n=e.sent,c=n.data,console.log("data",c),e.next=9,u();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),N=v.name,S=v.creatorName,A=v.goal,C=v.activities;return Object(h.jsxs)("div",{className:"single-routine",children:[Object(h.jsxs)("div",{className:"routine-header",children:[Object(h.jsxs)("div",{children:[Object(h.jsxs)("h3",{children:["Routine Name: ",N]}),Object(h.jsxs)("h4",{children:["Creator: ",S]}),Object(h.jsxs)("h4",{children:["Goal: ",A]})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{onClick:function(){return j("edit")},children:"Edit Routine Name/Goal"})}),Object(h.jsx)(l.a,{context:{routine:v,setRoutine:x}})]}),Object(h.jsx)("div",{className:"routine-activities",children:C.map((function(e){var t=e.id,n=e.name;return Object(h.jsx)("div",{children:Object(h.jsx)("div",{children:n})},t)}))}),Object(h.jsxs)("form",{onSubmit:R,children:[Object(h.jsx)("h2",{children:"Add Activity to this Routine"}),Object(h.jsxs)("select",{value:m.activityId,onChange:function(e){return k(Object(g.a)(Object(g.a)({},m),{},{activityId:e.target.value}))},children:[Object(h.jsx)("option",{value:-1,children:"Select an Activity"}),n.map((function(e){if(!C.find((function(t){return e.id===t.id})))return Object(h.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(h.jsx)("label",{children:"Count: "}),Object(h.jsx)("input",{type:"number",value:m.count,onChange:function(e){return k(Object(g.a)(Object(g.a)({},m),{},{count:e.target.value}))}}),Object(h.jsx)("label",{children:"Duration: "}),Object(h.jsx)("input",{type:"number",value:m.duration,onChange:function(e){return k(Object(g.a)(Object(g.a)({},m),{},{duration:e.target.value}))}}),Object(h.jsx)("button",{type:"submit",children:"Submit"})]})]})}),F=(n(57),function(e){var t=e.activities,n=e.handleActivities,c=e.token,o=Object(s.useState)(null),u=Object(a.a)(o,2),j=u[0],b=u[1],O=Object(l.i)().activityId,v=Object(l.g)(),x=function(){var e=Object(i.a)(r.a.mark((function e(t){var i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d.a.patch("/api/activities/".concat(O),j,{headers:{Authorization:"Bearer ".concat(c)}});case 4:if(i=e.sent,!1!==i.data.success){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,n();case 10:v("/activities"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){!function(){for(var e,n=0;n<t.length;n++)t[n].id===1*O&&(e=t[n]);b(e)}()}),[t]),j?Object(h.jsxs)("div",{className:"edit-activity-container",children:[Object(h.jsx)("h2",{className:"edit-activity-header",children:"Edit Activity"}),Object(h.jsx)(w,{activity:j,setActivity:b,handleSubmit:x})]}):Object(h.jsx)(h.Fragment,{children:"hello"})}),I=function(e){var t=e.activities,n=e.token,c=e.handleRoutines,o=Object(l.g)(),u=Object(s.useState)(""),j=Object(a.a)(u,2),b=j[0],O=j[1],v=Object(l.h)(),x=v.routine,f=v.setRoutine,p=function(){var e=Object(i.a)(r.a.mark((function e(t){var i,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d.a.patch("/api/routines/".concat(x.id),x,{headers:{Authorization:"Bearer ".concat(n)}});case 4:if(i=e.sent,!1!==(a=i.data).success){e.next=9;break}return O(a.message),e.abrupt("return");case 9:return e.next=11,c();case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h2",{children:"Edit Routine"}),b&&Object(h.jsx)("div",{children:b}),Object(h.jsx)(y,{routine:x,setRoutine:f,handleSubmit:p,activities:t}),Object(h.jsx)("button",{onClick:function(){return o(-1)},children:"Close Edit Routine Form"})]})},P=function(){var e=Object(s.useState)((function(){return localStorage.getItem("token")||""})),t=Object(a.a)(e,2),n=t[0],c=t[1],o=Object(s.useState)({}),u=Object(a.a)(o,2),b=u[0],O=u[1],x=Object(s.useState)([]),m=Object(a.a)(x,2),g=m[0],y=m[1],w=Object(s.useState)([]),N=Object(a.a)(w,2),S=N[0],A=N[1],P=Object(s.useState)([]),E=Object(a.a)(P,2),D=E[0],B=E[1],q=function(){var e=Object(i.a)(r.a.mark((function e(){var t,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("/api/users/".concat(b.username,"/routines"),{headers:{Authorization:"Bearer ".concat(n)}});case 3:if(t=e.sent,!1!==(c=t.data).success){e.next=7;break}return e.abrupt("return");case 7:B(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(i.a)(r.a.mark((function e(){var t,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("/api/users/me",{headers:{Authorization:"Bearer ".concat(n)}});case 3:t=e.sent,c=t.data,O(c),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("/api/routines");case 3:t=e.sent,n=t.data,A(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("error",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(i.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("/api/activities");case 3:t=e.sent,n=t.data,y(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){n&&z(),T(),U()}),[]),Object(s.useEffect)((function(){n?z():O({})}),[n]),Object(s.useEffect)((function(){q()}),[b,S]),Object(h.jsxs)(j.a,{children:[Object(h.jsx)(v,{token:n,user:b,setToken:c}),Object(h.jsxs)(l.d,{children:[Object(h.jsx)(l.b,{path:"/",element:Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Welcome to Fitness Trac.kr"}),Object(h.jsx)("p",{children:"Keep track of your exercise routines, and share it with others"})]})}),Object(h.jsx)(l.b,{path:"/authentication/:method",element:Object(h.jsx)(k,{setToken:c,setUser:O,handleUser:z})}),Object(h.jsx)(l.b,{path:"/activities",element:Object(h.jsx)(f,{activities:g,setActivities:y,token:n})}),Object(h.jsx)(l.b,{path:"/activity/:activityId",element:Object(h.jsx)(F,{token:n,handleActivities:U,activities:g,setActivities:y})}),Object(h.jsx)(l.b,{path:"/routines",element:Object(h.jsx)(p,{token:n,activities:g,routines:S})}),Object(h.jsx)(l.b,{path:"/routines/:routineId",element:Object(h.jsx)(C,{handleRoutines:T,token:n,activities:g,routines:S,setRoutines:A,userRoutines:D}),children:Object(h.jsx)(l.b,{path:"edit",element:Object(h.jsx)(I,{token:n,handleRoutines:T,activities:g})})}),Object(h.jsx)(l.b,{path:"/profile",element:Object(h.jsx)(R,{userRoutines:D,setUserRoutines:B,routines:S,user:b,token:n,setRoutines:A,handleRoutines:T})})]})]})};u.a.render(Object(h.jsx)(P,{}),document.querySelector("#root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.0d196994.chunk.js.map